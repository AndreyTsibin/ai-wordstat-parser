# ARCHITECTURE.md

## ๐ ะขะตัะฝะธัะตัะบะธะน ะบะพะฝัะตะบัั

ะะฐััะตั ะดะปั ะฏะฝะดะตะบั ะะพัะดััะฐั API, ะบะพัะพััะน ะฐะฒัะพะผะฐัะธะทะธััะตั ัะฑะพั ะฟะพะธัะบะพะฒัั ะทะฐะฟัะพัะพะฒ ะดะปั SEO-ะฟะปะฐะฝะธัะพะฒะฐะฝะธั. ะะฐะฑะพัะฐะตั ะฒ ัะฒัะทะบะต ั Claude Code: Claude ะณะตะฝะตัะธััะตั ัะฟะธัะพะบ ะทะฐะฟัะพัะพะฒ ะฝะฐ ะพัะฝะพะฒะต ะฑะธะทะฝะตั-ะธะฝัะพัะผะฐัะธะธ โ ะฟะฐััะตั ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต ัะตัะตะท API โ Claude ะฐะฝะฐะปะธะทะธััะตั ัะตะทัะปััะฐัั ะธ ัะพะทะดะฐัั ะบะพะฝัะตะฝั-ะฟะปะฐะฝ.

---

## ๐ ะขะตัะฝะพะปะพะณะธัะตัะบะธะน ััะตะบ

### ะฏะทัะบ: **Python 3.8+**

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**
- โ ะััััะฐั ัะฐะทัะฐะฑะพัะบะฐ ะฟัะพัััั ัะบัะธะฟัะพะฒ
- โ ะัััะพะตะฝะฝัะต ะฑะธะฑะปะธะพัะตะบะธ ะดะปั HTTP (`urllib`) ะธ JSON
- โ ะฃััะฐะฝะพะฒะปะตะฝ ะฟะพ ัะผะพะปัะฐะฝะธั ะฝะฐ macOS
- โ ะัะพััะฐั ะธะฝัะตะณัะฐัะธั ั Claude Code ัะตัะตะท ัะฐะนะปะพะฒัั ัะธััะตะผั

### ะะฐะฒะธัะธะผะพััะธ: **ะัะปะตะฒัะต (ัะพะปัะบะพ stdlib)**

**ะะฑะพัะฝะพะฒะฐะฝะธะต:**
- ะะฐััะตั ะธัะฟะพะปัะทัะตั ัะพะปัะบะพ ะฒัััะพะตะฝะฝัะต ะผะพะดัะปะธ Python
- ะะต ััะตะฑัะตั `pip install` ะธ ัะฟัะฐะฒะปะตะฝะธั ะฒะธัััะฐะปัะฝัะผะธ ะพะบััะถะตะฝะธัะผะธ
- ะะฐะฟััะบะฐะตััั ััะฐะทั ะฟะพัะปะต ะบะปะพะฝะธัะพะฒะฐะฝะธั ัะตะฟะพะทะธัะพัะธั

**ะัะฟะพะปัะทัะตะผัะต ะผะพะดัะปะธ:**
- `urllib.request` โ HTTP-ะทะฐะฟัะพัั ะบ API
- `json` โ ะฟะฐััะธะฝะณ ะบะพะฝัะธะณััะฐัะธะธ ะธ ะพัะฒะตัะพะฒ API
- `time` โ ะทะฐะดะตัะถะบะธ ะผะตะถะดั ะทะฐะฟัะพัะฐะผะธ
- `datetime` โ ะฒัะตะผะตะฝะฝัะต ะผะตัะบะธ ะฒ ะปะพะณะฐั

---

## ๐ ะััะธัะตะบัััะฐ ัะธััะตะผั

### ะะพะผะฟะพะฝะตะฝัั:

```
โโโโโโโโโโโโโโโโโโโ
โ  config.json    โ โ ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟะพะปะฝัะตั ะฒัััะฝัั
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ  Claude Code    โ โ ะะตะฝะตัะธััะตั queries.txt
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ   parser.py     โ โ ะะฐััะธั API ะะพัะดััะฐัะฐ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ  results.md     โ โ Markdown ั ัะฐะฑะปะธัะฐะผะธ ะธ ะบะฐัะตะณะพัะธัะผะธ
โโโโโโโโโโฌโโโโโโโโโ
         โ
         โ
โโโโโโโโโโโโโโโโโโโ
โ  Claude Code    โ โ ะกะพะทะดะฐัั content-plan.md
โโโโโโโโโโโโโโโโโโโ
```

### Data Flow:

1. **Input:** `config.json` + `queries.txt`
2. **Processing:** API requests โ JSON responses โ ะบะฐัะตะณะพัะธะทะฐัะธั
3. **Output:** `results.md` (Markdown ัะฐะฑะปะธัั)

---

## ๐ฆ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
wordstat-parser/
โ
โโโ config.json              # ะะพะฝัะธะณััะฐัะธั (ัะพะบะตะฝ, ัะตะณะธะพะฝ, ะฝะฐัััะพะนะบะธ)
โโโ queries.txt              # ะกะฟะธัะพะบ ะทะฐะฟัะพัะพะฒ (ะณะตะฝะตัะธััะตั Claude Code)
โโโ parser.py                # ะัะฝะพะฒะฝะพะน ัะบัะธะฟั ะฟะฐััะตัะฐ
โโโ results.md               # ะะตะทัะปััะฐัั ะฟะฐััะธะฝะณะฐ
โ
โโโ ARCHITECTURE.md          # ะญัะพั ัะฐะนะป
โโโ PLANNING.md              # ะะพัะพะถะฝะฐั ะบะฐััะฐ
โโโ TASKS.md                 # ะะฐะดะฐัะธ ะดะปั Claude Code
โโโ README.md                # ะะฝััััะบัะธั ะฟะพ ะธัะฟะพะปัะทะพะฒะฐะฝะธั
```

---

## ๐ง ะะปััะตะฒัะต ะผะพะดัะปะธ ะฟะฐััะตัะฐ

### 1. **ConfigLoader**
- ะงะธัะฐะตั `config.json`
- ะะฐะปะธะดะธััะตั ะพะฑัะทะฐัะตะปัะฝัะต ะฟะพะปั (ัะพะบะตะฝ, ัะตะณะธะพะฝ)
- ะะพะทะฒัะฐัะฐะตั ัะปะพะฒะฐัั ะฝะฐัััะพะตะบ

### 2. **QueryReader**
- ะงะธัะฐะตั `queries.txt` ะฟะพัััะพัะฝะพ
- ะฃะดะฐะปัะตั ะฟััััะต ัััะพะบะธ ะธ ะฟัะพะฑะตะปั
- ะะพะทะฒัะฐัะฐะตั ัะฟะธัะพะบ ะทะฐะฟัะพัะพะฒ

### 3. **WordstatAPI**
- ะัะฟัะฐะฒะปัะตั POST-ะทะฐะฟัะพัั ะบ `/v1/topRequests`
- ะะฑัะฐะฑะฐััะฒะฐะตั ะพัะธะฑะบะธ (ัะตััะฐะธ 3 ัะฐะทะฐ)
- ะะพะทะฒัะฐัะฐะตั JSON ั ััะฐะทะฐะผะธ ะธ ัะฐััะพัะฝะพัััั

### 4. **KeywordCategorizer**
- ะะปะฐััะธัะธัะธััะตั ััะฐะทั ะฟะพ ัะธะฟะฐะผ:
  - ๐ ะะพะผะผะตััะตัะบะธะน (`ะบัะฟะธัั`, `ะทะฐะบะฐะทะฐัั`, `ะฟะพะด ะบะปัั`)
  - ๐ ะะฝัะพัะผะฐัะธะพะฝะฝัะน (`ะบะฐะบ`, `ััะพ ัะฐะบะพะต`, `ะฟะพัะตะผั`)
  - ๐ฐ ะฆะตะฝะพะฒะพะน (`ัะตะฝะฐ`, `ััะพะธะผะพััั`, `ัะบะพะปัะบะพ ััะพะธั`)
  - ๐ ะะพะบะฐะปัะฝัะน (ัะพะดะตัะถะธั ะฝะฐะทะฒะฐะฝะธะต ะณะพัะพะดะฐ)

### 5. **DuplicateHandler**
- ะััะปะตะถะธะฒะฐะตั ัะฝะธะบะฐะปัะฝัะต ััะฐะทั
- ะะพะผะตัะฐะตั ะดัะฑะปะธะบะฐัั: `"ะฒัััะตัะฐะตััั ะฒ 3 ะทะฐะฟัะพัะฐั"`

### 6. **MarkdownGenerator**
- ะคะพัะผะฐัะธััะตั ัะตะทัะปััะฐัั ะฒ ัะฐะฑะปะธัั
- ะะพะฑะฐะฒะปัะตั ัะผะพะดะทะธ ะธ ะฝัะผะตัะฐัะธั
- ะกะพะทะดะฐัั ัะฒะพะดะฝัั ััะฐัะธััะธะบั

---

## ๐ ะกัะฐะฝะดะฐััั ะบะพะดะธัะพะฒะฐะฝะธั

### Naming Conventions:
- **ะะตัะตะผะตะฝะฝัะต:** `snake_case` (`top_results_limit`)
- **ะคัะฝะบัะธะธ:** `snake_case` (`read_config()`)
- **ะะปะฐััั:** `PascalCase` (`WordstatAPI`)
- **ะะพะฝััะฐะฝัั:** `UPPER_SNAKE_CASE` (`API_BASE_URL`)

### Code Style:
- **PEP 8** โ ััะฐะฝะดะฐัั Python
- ะะฐะบัะธะผะฐะปัะฝะฐั ะดะปะธะฝะฐ ัััะพะบะธ: 100 ัะธะผะฒะพะปะพะฒ
- Docstrings ะดะปั ะฒัะตั ััะฝะบัะธะน
- Type hints ะณะดะต ะฒะพะทะผะพะถะฝะพ

### Error Handling:
- Try-except ะฑะปะพะบะธ ะดะปั ะฒัะตั ะฒะฝะตัะฝะธั ะฒัะทะพะฒะพะฒ
- ะะพะณะธัะพะฒะฐะฝะธะต ะพัะธะฑะพะบ ะฒ ะบะพะฝัะพะปั
- Graceful degradation (ะฟัะพะฟััะบ ะฝะตัะดะฐัะฝัั ะทะฐะฟัะพัะพะฒ)

### Logging:
- ะญะผะพะดะทะธ ะดะปั ะฒะธะทัะฐะปัะฝะพะน ะฝะฐะฒะธะณะฐัะธะธ
- ะัะพะณัะตัั-ะฑะฐั ะฒ ะบะพะฝัะพะปะธ (`[1/15]`)
- ะขะฐะนะผััะฐะผะฟั ะฒ ะบัะธัะธัะฝัั ะผะตััะฐั

---

## ๐ ะะตะทะพะฟะฐัะฝะพััั

- ะขะพะบะตะฝ ััะฐะฝะธััั ะปะพะบะฐะปัะฝะพ ะฒ `config.json` (ะฝะต ะบะพะผะผะธัะธััั ะฒ Git)
- `.gitignore` ะธัะบะปััะฐะตั `config.json` ะธ `results.md`
- ะะฐะดะตัะถะบะฐ ะผะตะถะดั ะทะฐะฟัะพัะฐะผะธ (rate limiting)

---

## ๐ Best Practices

### 1. **ะะดะตะผะฟะพัะตะฝัะฝะพััั**
- ะะพะฒัะพัะฝัะน ะทะฐะฟััะบ ะฟะตัะตะทะฐะฟะธััะฒะฐะตั `results.md`
- ะะต ะฝะฐะบะฐะฟะปะธะฒะฐะตั ะผััะพั

### 2. **Fail-safe**
- ะัะธ ะพัะธะฑะบะต API: 3 ัะตััะฐั โ ะฟัะพะฟััะบ ะทะฐะฟัะพัะฐ โ ะฟัะพะดะพะปะถะตะฝะธะต
- ะงะฐััะธัะฝัะต ัะตะทัะปััะฐัั ัะพััะฐะฝััััั

### 3. **ะงะธัะฐะฑะตะปัะฝะพััั**
- Markdown ั ัะฐะฑะปะธัะฐะผะธ ะธ ัะผะพะดะทะธ
- ะัะผะตัะฐัะธั ะดะปั ัะดะพะฑะฝะพะน ะฝะฐะฒะธะณะฐัะธะธ

### 4. **ะะฐััะธััะตะผะพััั**
- ะะตะณะบะพ ะดะพะฑะฐะฒะธัั ะฝะพะฒัะต ะผะตัะพะดั API (`/v1/dynamics`, `/v1/regions`)
- ะะฐัะตะณะพัะธะทะฐัะพั ัะฐะฑะพัะฐะตั ัะตัะตะท ัะปะพะฒะฐัะธ (ะปะตะณะบะพ ะดะพะฟะพะปะฝััั)

---

## ๐ ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

**ะะถะธะดะฐะตะผัะต ะฟะพะบะฐะทะฐัะตะปะธ:**
- 15-20 ะทะฐะฟัะพัะพะฒ = ~40-60 ัะตะบัะฝะด
- ะะฐะดะตัะถะบะฐ: 2 ัะตะบ ะผะตะถะดั ะทะฐะฟัะพัะฐะผะธ
- ะะฐะผััั: <50 MB (ะฒัั ะฒ RAM)

**ะะฟัะธะผะธะทะฐัะธั:**
- ะะตั ะธะทะฑััะพัะฝัั ะบะพะฟะธัะพะฒะฐะฝะธะน ะดะฐะฝะฝัั
- ะะพัะพะบะพะฒะฐั ะทะฐะฟะธัั ะฒ ัะฐะนะป (ะฝะต ะฝะฐะบะฐะฟะปะธะฒะฐะตะผ ะฒัั ะฒ ะฟะฐะผััะธ)

---

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

**ะะธะฝะธะผะฐะปัะฝัะน ะฝะฐะฑะพั:**
- ะัะพะฒะตัะบะฐ ััะตะฝะธั `config.json` ั ะฝะตะฒะฐะปะธะดะฝัะผะธ ะดะฐะฝะฝัะผะธ
- ะะพะบ-ะพัะฒะตั ะพั API ะดะปั ัะตััะธัะพะฒะฐะฝะธั ะบะฐัะตะณะพัะธะทะฐัะพัะฐ
- ะัะพะฒะตัะบะฐ ะดัะฑะปะธะบะฐัะพะฒ

**Note:** ะะปั MVP ัะตััั ะพะฟัะธะพะฝะฐะปัะฝั, ะบะพะด ะฟัะพััะพะน ะธ ะปะตะณะบะพ ะพัะปะฐะถะธะฒะฐะตััั ะฒัััะฝัั.